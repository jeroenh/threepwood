{% extends 'reports/reports.html' %}
{% load crispy_forms_tags %}
{% load url from future %}

{% block container %}


    <h2>Metadata</h2>
    <ul class="unstyled">
        <li>{{ torrent.torrentmetadata.name }}</li>
        <li>Total distinct peers {{ torrent.distinct_peers }}</li>
        <li>Dutch statistics:
            <table class="table">
                <thead><th>ASName</th><th>Percentage</th></thead>
                <tbody>
                    {% for key, value in torrent.dutch_peers.items %}
                       <tr> <td>{{ key }}</td> <td>{{ value|floatformat:2  }}</td></tr>
                    {% endfor %}
                </tbody>
            </table>
            </ul>
        </li>
    </ul>

      <h2>Sessions({{ torrent.session_set.all|length }})</h2>

     <table class="table">
     <thead>
     <th>Created</th>
     <th>Client</th>
     <th>Client Version</th>
     <th>Peer count</th>
     </thead>
     <tbody>
    {% for session in torrent.sorted_session_set %}
        <tr>
            <td>{{ session.date_created }}</td>
            <td><a href="{% url 'reports_client_detail' session.client.pk %}">{{ session.client|truncatechars:32 }}</a></td>
            <td>{{ session.version }}</td>
            <td>{{ session.get_size }}</td>
        </tr>
    {% endfor %}
     </tbody>
     </table>
{% endblock%}